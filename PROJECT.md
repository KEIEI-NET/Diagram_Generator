# Diagram Skills - Project Documentation

*プロジェクトID: diagram-skills*
*開始日: 2025年11月17日*
*現在のステータス: Production Ready v1.1.1*
*最終更新: 2025年11月17日*

## 📊 プロジェクト情報

### 基本情報

| 項目 | 内容 |
|------|------|
| プロジェクト名 | Diagram Skills |
| バージョン | 1.1.1 |
| 言語 | Markdown, JSON, Bash, Batch |
| ライセンス | MIT |
| 対象プラットフォーム | Claude Code CLI |
| サポートOS | Windows, macOS, Linux |

### ステークホルダー

| 役割 | 説明 |
|------|------|
| エンドユーザー | Claude Codeユーザー（開発者、エンジニア、アーキテクト） |
| 開発者 | Claudeを使ったAI支援開発 |
| メンテナー | プロジェクトの継続的改善 |

## 🎯 プロジェクトの目標

### ミッション

Claude Code用の高品質な図生成Skillsを提供し、開発者のドキュメント作成を効率化する。

### ビジョン

- **2025年Q4**: 基本機能の完成（✅ 達成）
- **2026年Q1**: テンプレート機能追加
- **2026年Q2**: サンプル集拡充
- **2026年Q3**: コミュニティ主導の開発

### 成功指標（KPI）

| 指標 | 目標値 | 現在値 |
|------|--------|--------|
| インストール成功率 | > 95% | 測定中 |
| ユーザー満足度 | > 4.5/5 | 測定中 |
| バグ報告数 | < 5件/月 | 0件 |
| ドキュメント完全性 | 100% | 100% ✅ |

## 🏗️ アーキテクチャ

### システム構成図

```
┌─────────────────────────────────────────────┐
│             Claude Code CLI                  │
├─────────────────────────────────────────────┤
│                                              │
│  ┌────────────────────────────────────┐    │
│  │   Diagram Skills Package            │    │
│  ├────────────────────────────────────┤    │
│  │                                     │    │
│  │  ┌──────────────────────────┐      │    │
│  │  │ drawio-diagram-generator │      │    │
│  │  │  - SKILL.md              │      │    │
│  │  │  - styles.json           │      │    │
│  │  └──────────────────────────┘      │    │
│  │                                     │    │
│  │  ┌──────────────────────────┐      │    │
│  │  │ mermaid-diagram-generator│      │    │
│  │  │  - SKILL.md              │      │    │
│  │  │  - simplification-rules.md      │    │
│  │  └──────────────────────────┘      │    │
│  │                                     │    │
│  └─────────────────────────────────────┘    │
│                                              │
└─────────────────────────────────────────────┘
          ↓
┌─────────────────────────────────────────────┐
│               出力ファイル                    │
├─────────────────────────────────────────────┤
│  - .drawio files (Draw.io Desktop)           │
│  - .md files (GitHub, VS Code, Cursor)       │
└─────────────────────────────────────────────┘
```

### データフロー

```
ユーザー入力
    ↓
Claude がSkillを選択
    ↓
Skill読み込み（SKILL.md）
    ↓
補助ファイル読み込み（styles.json, simplification-rules.md）
    ↓
図の生成ロジック実行
    ↓
ファイル出力（.drawio または .md）
    ↓
ユーザーに提示
```

## 📁 ディレクトリ構造詳細

```
diagram-skills/
│
├── ドキュメント
│   ├── README.md                    # 13KB - 総合ガイド
│   ├── INSTALL.md                   # 14KB - インストールガイド
│   ├── QUICKSTART.md                # 2KB  - クイックスタート
│   ├── CHANGELOG.md                 # 5KB  - 変更履歴
│   ├── CLAUDE.md                    # 10KB - Claude Code向けガイド
│   ├── PROJECT.md                   # このファイル
│   └── DEVELOPMENT.md               # 開発ガイド
│
├── インストーラー
│   ├── install.sh                   # 6KB  - Linux/macOS
│   ├── install.bat                  # 5KB  - Windows
│   ├── uninstall.sh                 # 4KB  - Linux/macOS
│   └── uninstall.bat                # 4KB  - Windows
│
├── Draw.io Skill
│   └── drawio-diagram-generator/
│       ├── SKILL.md                 # 15KB - スキル本体
│       └── styles.json              # 11KB - スタイル定義
│
├── Mermaid Skill
│   └── mermaid-diagram-generator/
│       ├── SKILL.md                 # 16KB - スキル本体
│       └── simplification-rules.md  # 14KB - 簡素化ルール
│
└── 設定ファイル
    ├── .claudeignore                # Claude無視ファイル
    └── .gitignore                   # Git無視ファイル
```

## 🔧 技術スタック

### 開発言語

| 言語 | 用途 | 割合 |
|------|------|------|
| Markdown | ドキュメント、Skill定義 | 70% |
| JSON | 設定ファイル | 15% |
| Bash | Linux/macOSインストーラー | 10% |
| Batch | Windowsインストーラー | 5% |

### 依存関係

| ツール | バージョン | 必須/オプション |
|--------|-----------|----------------|
| Claude Code | 最新版 | 必須 |
| Draw.io | 任意 | オプション（閲覧用） |
| VS Code | 任意 | オプション（Mermaidプレビュー） |

### フォーマット

| ファイルタイプ | フォーマット | エンコーディング |
|---------------|-------------|-----------------|
| .md | Markdown | UTF-8 |
| .json | JSON | UTF-8 |
| .sh | Bash Script | UTF-8 |
| .bat | Batch Script | UTF-8 (BOM無し) |

## 📋 機能一覧

### Draw.io Diagram Generator

#### 対応図タイプ（12種類）

| # | 図タイプ | 複雑度 | 推奨用途 |
|---|---------|--------|----------|
| 1 | ユースケース図 | 低 | システム機能の概要 |
| 2 | クラス図 | 高 | オブジェクト指向設計 |
| 3 | シーケンス図 | 中 | 時系列での相互作用 |
| 4 | アクティビティ図 | 中 | ワークフロー |
| 5 | ステートマシン図 | 中 | 状態遷移 |
| 6 | コンポーネント図 | 中 | システム構成 |
| 7 | 配置図 | 低 | 物理配置 |
| 8 | オブジェクト図 | 低 | インスタンス図 |
| 9 | パッケージ図 | 低 | 依存関係 |
| 10 | コミュニケーション図 | 中 | メッセージング |
| 11 | ER図 | 中 | データベース設計 |
| 12 | データモデル図 | 高 | 論理/物理モデル |

#### 主要機能

**線の交差回避（7つのテクニック）:**
1. 階層的レイアウト
2. 直交ルーティング
3. 経由点（Waypoints）
4. グリッド配置
5. 放射状配置
6. レーン使用
7. 自動交差検出

**スタイル:**
- パステルカラーパレット（6色）
- カスタムテーマ（3種類）
- 日本語ラベル + 英語技術用語

**出力:**
- .drawioファイル
- Draw.ioで編集可能

### Mermaid Diagram Generator

#### 対応図タイプ（主要8種類）

| # | 図タイプ | Mermaid対応 | 代替手段 |
|---|---------|------------|----------|
| 1 | ユースケース図 | ⚠️ 非公式 | flowchart |
| 2 | クラス図 | ✅ | classDiagram |
| 3 | シーケンス図 | ✅ | sequenceDiagram |
| 4 | アクティビティ図 | ✅ | flowchart |
| 5 | ステートマシン図 | ✅ | stateDiagram-v2 |
| 11 | ER図 | ✅ | erDiagram |
| 12 | データモデル図 | ✅ | erDiagram |

#### 主要機能

**簡素化ルール:**
- 要素数: 10-15個以内
- ネスト: 2-3階層まで
- ラベル: 30文字以内
- 複雑度自動評価

**プラットフォーム対応:**
- GitHub
- GitLab
- VS Code
- Cursor
- Notion
- Obsidian

**出力:**
- .mdファイル（Markdown）
- .mmdファイル（Mermaid）

### インストーラー

#### 機能

**共通:**
- 既存Skillsの自動バックアップ
- エラー時の自動ロールバック
- 詳細なログ出力
- diagram-skillsのみを対象

**プラットフォーム固有:**

| 機能 | Linux/macOS | Windows |
|------|------------|---------|
| 絵文字 | ✅ | ❌ |
| カラー出力 | ✅ | ⚠️ 制限あり |
| UTF-8自動設定 | ✅ | ✅ (chcp 65001) |
| 確認プロンプト | ✅ | ✅ |
| 強制モード | ✅ | ✅ |
| サイレントモード | ✅ | ✅ |
| デバッグモード | ✅ | ✅ |

## 📊 品質メトリクス

### コード品質

| 指標 | 目標 | 現在 |
|------|------|------|
| ドキュメントカバレッジ | 100% | 100% ✅ |
| インストール成功率 | > 95% | 測定中 |
| エラーハンドリング | 完全 | ✅ |
| ロールバック機能 | 動作確認済み | ✅ |

### ファイルサイズ

| カテゴリ | 合計サイズ |
|---------|-----------|
| ドキュメント | 70KB |
| Skills | 56KB |
| インストーラー | 19KB |
| 設定ファイル | 1KB |
| **合計** | **146KB** |

### 複雑度

| ファイル | 行数 | 複雑度 |
|---------|------|--------|
| SKILL.md (Draw.io) | 555行 | 中 |
| SKILL.md (Mermaid) | 600行 | 中 |
| install.sh | 350行 | 中 |
| install.bat | 300行 | 中 |

## 🔒 セキュリティ

### セキュリティ対策

1. **既存データの保護**
   - 自動バックアップ
   - ロールバック機能
   - 他のSkillsへの影響ゼロ

2. **入力検証**
   - ファイルパスの検証
   - 権限チェック
   - エラーハンドリング

3. **ログ管理**
   - 個人情報は記録しない
   - エラー情報のみ記録

### セキュリティリスク

| リスク | 影響度 | 対策 |
|--------|--------|------|
| 既存Skillsの破損 | 高 | バックアップ・ロールバック |
| インストール失敗 | 中 | 詳細なエラーメッセージ |
| 不正なファイルパス | 低 | パス検証 |

## 🧪 テスト戦略

### テスト範囲

| テストタイプ | 対象 | 頻度 |
|------------|------|------|
| ユニットテスト | インストーラー関数 | 実装時 |
| 統合テスト | インストールフロー全体 | リリース前 |
| E2Eテスト | Skill動作確認 | リリース前 |
| 互換性テスト | 全OS | リリース前 |

### テスト環境

| OS | バージョン | 優先度 |
|----|-----------|--------|
| Windows 11 | 最新 | 高 |
| Windows 10 | 最新 | 高 |
| macOS | 最新 | 高 |
| Ubuntu 22.04 | LTS | 中 |
| Ubuntu 20.04 | LTS | 中 |

## 📈 ロードマップ

### 完了済み（v1.1.0）

- [x] Draw.io Skill実装
- [x] Mermaid Skill実装
- [x] 線の交差回避機能
- [x] Windows/Linux/macOS対応インストーラー
- [x] 完全なドキュメント
- [x] アンインストーラー

### 計画中（v1.2.0）

- [ ] テンプレート機能
- [ ] 自動テストスクリプト
- [ ] CI/CD設定
- [ ] コミュニティガイドライン

### 検討中（v2.0.0）

- [ ] インタラクティブな図作成
- [ ] リアルタイムプレビュー
- [ ] クラウド連携
- [ ] チーム共有機能

## 🤝 コントリビューション

### コントリビューター募集

| 役割 | スキル | 時間 |
|------|--------|------|
| ドキュメント改善 | Markdown | 2-4時間/週 |
| バグ修正 | Bash/Batch | 4-8時間/週 |
| 新機能開発 | 各種 | 8-16時間/週 |
| テスト | 各OS環境 | 2-4時間/週 |

### コントリビューションプロセス

1. Issueを作成
2. Fork & Clone
3. 機能実装/バグ修正
4. テスト
5. Pull Request
6. レビュー
7. マージ

## 📞 サポート

### サポートチャネル

| チャネル | 用途 | 応答時間 |
|---------|------|---------|
| GitHub Issues | バグ報告・機能要望 | 1-3営業日 |
| INSTALL.md | トラブルシューティング | 即座 |
| CLAUDE.md | 開発者向け情報 | 即座 |

### よくある問題

1. **インストール失敗**
   - 原因: 権限不足、既存ファイル
   - 解決: INSTALL.mdのトラブルシューティング参照

2. **Skillが認識されない**
   - 原因: キャッシュ、パス設定
   - 解決: `claude skills refresh`

3. **文字化け（Windows）**
   - 原因: コードページ
   - 解決: `chcp 65001`

## 📊 使用統計（予定）

将来的に収集する予定の統計情報：

- インストール数
- アクティブユーザー数
- 生成された図の種類別統計
- エラー発生率
- ユーザーフィードバック

## 📝 ライセンス

MIT License

## 🎯 プロジェクトステータス

**現在のステータス:** Production Ready ✅

**品質指標:**
- ドキュメント: ✅ 完全
- テスト: ⚠️ 手動テスト済み（自動テスト未実装）
- CI/CD: ❌ 未設定
- リリース: ✅ v1.1.0

**次のマイルストーン:** v1.2.0（テンプレート機能追加）

---

*最終更新: 2025年11月17日*
*Document Version: 1.0*
